// Generated by CoffeeScript 1.3.3

$(function() {
  var $grid, gridRowTmpl, onDblClickRow, rewriteRows, search;
  $grid = $('#grid');
  gridRowTmpl = '<tr>\n<td class="column_no">{{ no }}</td>\n<td class="column_filename">{{ filename }}</td>\n<td class="column_size">{{ size }}</td>\n<td class="column_created">{{ created }}</td>\n</tr>';
  search = function() {
    var _query, _url;
    _url = '/list/search';
    _query = [];
    if (_query.length > 0) {
      _url += concreteQuery(_query);
    }
    return $.getJSON(_url, {}, function(json) {
      return rewriteRows(json);
    });
  };
  rewriteRows = function(json) {
    return _.each(json, function(o) {
      var $tbdy;
      $tbdy = $grid.find('tbody');
      return (function(_o) {
        return setTimeout(function() {
          return $tbdy.append(_.template(gridRowTmpl, o));
        }, 1000);
      })(o);
    });
  };
  onDblClickRow = function() {
    return console.log('huga');
  };
  $grid.on('dblclick', 'tr', onDblClickRow);
  return search();
});
